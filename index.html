<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aiism-人工智能图片和视频处理专家，在线图片深层艺术滤镜处理工具</title>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
</head>
<body>
    <div class="container">
        <div class="cover-bg">
            <img src="image/modelpic-1.jpg">
        </div>
        <div class="ready-page">
            <div class="ready-title">
                <img src="image/modelpic-1.jpg">
            </div>
            <div class="stage-panel">
                <div class="stage-select">
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="0">
                    </div>
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="1">
                    </div>
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="2">
                    </div>
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="3">
                    </div>
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="4">
                    </div>
                    <div class="stage-box">
                        <img  src="image/modelpic-1.jpg" data-level="5">
                    </div>
                </div>
            </div>
            <div class="rule-panel">
                 <img src="image/modelpic-1.jpg">
                 <p class="rule-text">在120秒内完成8题挑战</p>
                <button class="start">点此开始</button>
            </div>
        </div>
        <div class="answer-page">
            <div class="top-bar">
                <span class="restart">重新开始</span>
                <div class="timer">0'00"</div>
                <span class="skip">跳过此题</span>
            </div>
            <div class="question-pic">
                <img src="image/modelpic-1.jpg">
                <span class="quenum">第一题</span>
            </div>
            <div class="answer-area">
                <div class="answer-box"></div>
                <div class="words-box"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type='text/javascript'>
        $(function () {
            var $coverbg = $(".cover-bg");

            var $readypage = $(".ready-page");
            var $stagepanel = $(".ready-page .stage-panel");
            var $stageimg = $(".ready-page .stage-panel .stage-box img");
            var $rulepanel = $(".ready-page .rule-panel");
            var $ruletext = $(".ready-page .rule-panel .rule-text");
            var $start = $(".ready-page .rule-panel .start");

            var $answerpage = $(".answer-page");
            var $questionpic = $(".answer-page .question-pic img");
            var $questionnum = $(".answer-page .question-pic .quenum");
            var $answerbox = $(".answer-page .answer-area .answer-box");
            var $wordsbox = $(".answer-page .answer-area .words-box");
            var $restart = $(".answer-page .top-bar .restart");
            var $timer = $(".answer-page .top-bar .timer");
            var $skip = $(".answer-page .top-bar .skip");

            var level = 4;
            var questionbase={};
            var stagequestions=[];
            var time = 120;
            var quenumtext =["第一题","第二题","第三题","第四题","第五题","第六题"];
            var syssecond;
            var intervalobj;

            init();

            $start.click(function () {
                initquestion(stagequestions[0],0);
                $readypage.hide();
                $answerpage.show();
                startCounting(time);
            });



            function init() {
                $.getJSON("data.json",function (data) {
                    questionbase = data;
                });
                initStagepanel(level);
            }


            function startChallenge (i){
                stagequestions = questionbase["level"+i].questions;
                time = questionbase["level"+i].time;
                $ruletext.text("请在"+time+"秒内完成"+stagequestions.length+"题挑战");
                $stagepanel.hide();
                $rulepanel.show();
            }


            function initStagepanel(n) {
                 for (var i=0; i<=n;i++) {
                     $stageimg.eq(i).addClass("active").click(function () {
                         startChallenge ($(this).data("level"));
                     })
                 }
            }

            function initquestion(question,index) {
                $questionpic.attr("src",question.img);
                $questionnum.text(quenumtext[index]);
                $answerbox.attr("data-answer",question.answer).addClass("answer"+question.answer.length);
                for (var i=0; i<question.answer.length;i++) {
                   $("<span class='anser-word'></span>").click(answerclick).appendTo($answerbox);
                }
                $.each(question.words.split(""),function (index,word){
                    $("<span class='word'></span>").text(word).click(wordclick).appendTo($wordsbox);
                })
            }
            function answerclick() {
                if ($(this).text()){
                    var word = $(this).text();
                    $(this).empty();
                    $wordsbox.find(".selected").each(function () {
                        if ($(this).text()==word){
                            $(this).removeClass("selected");
                        }
                    });
                }
            }
            
            function wordclick() {
                var word = $(this).text();
                if($(this).hasClass("selected")){
                    $(this).removeClass("selected");
                    $answerbox.find(".anser-word").each(function () {
                        if ($(this).text()==word){
                            $(this).empty();
                        }
                    })
                }else {
                    for (var i=0; i< $answerbox.find(".anser-word").size();i++) {
                        if (!$answerbox.find(".anser-word").eq(i).text()) {
                            $answerbox.find(".anser-word").eq(i).text(word);
                            $(this).addClass("selected");
                            break;
                        }
                    }
                    checkanswer();
                }
            }
            function checkanswer() {
                var answer ="";
                $answerbox.find(".anser-word").each(function () {
                    answer= answer + $(this).text();
                });
                if (answer == $answerbox.data("answer")){
                    console.log("答对了!");
                }
            }
            function startCounting(second) {
                syssecond = second;
                setRemainTime();
                intervalobj = window.setInterval(setRemainTime, 1000);
            }

            function timesup() {
                alert("时间到!");
            }
            function setRemainTime() {
                if (syssecond > 0) {
                    syssecond = syssecond - 1;
                    var second = Math.floor(syssecond % 60);
                    var minite = Math.floor((syssecond / 60) % 60);
                    $timer.text( minite + "分" + second + "秒");
                } else {
                    window.clearInterval(intervalobj);
                    timesup();
                }
            }

        });
    </script>
</body>
</html>